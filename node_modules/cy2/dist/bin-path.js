"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getCypressCLIBinPath = getCypressCLIBinPath;
var _fs = _interopRequireDefault(require("fs"));
var _path = _interopRequireDefault(require("path"));
var _npmWhich = _interopRequireDefault(require("npm-which"));
var _os = require("os");
var _debug = require("./debug");
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function getCypressCLIBinPath() {
    return new Promise((resolve, reject)=>{
        const location = (0, _os).platform() === 'win32' ? process.cwd() : __dirname;
        (0, _npmWhich).default(location)('cypress', function(err, binaryCypress) {
            if (err) {
                return reject(err);
            }
            (0, _debug).debug('Cypress binary: %s', binaryCypress);
            const packagePath = _path.default.normalize(_fs.default.realpathSync(binaryCypress));
            (0, _debug).debug('Cypress normalized binary path: %s', packagePath);
            return resolve(packagePath);
        });
    });
}
